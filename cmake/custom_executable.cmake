function(add_sycl_executable source_file)
    add_executable(${source_file} "${source_file}.cpp")
    target_link_libraries(${source_file} PUBLIC Simulation Static_RNG::Static_RNG cppitertools)
    # if(${ENABLE_TBB})
    # target_link_libraries(${source_file} PUBLIC TBB::tbb)
    # endif()
    target_link_options(${source_file} PUBLIC ${SBM_SIMULATION_DEFAULT_FLAGS})
    target_compile_options(${source_file} PUBLIC ${SYCL_CUSTOM_FLAGS})
    target_compile_options(${source_file} PUBLIC ${DEFAULT_WARNING_FLAGS})
    target_include_directories(${source_file} PUBLIC ${SBM_SIMULATION_INCLUDE_DIR})
    if (${ENABLE_CLANG_TIDY})

    set_target_properties(${source_file} PROPERTIES CXX_CLANG_TIDY "${CLANG_TIDY_COMMAND}")
    endif()
    # target_link_options(${source_file} PUBLIC -static-libgcc -static-libstdc++)
endfunction()

function(add_sycl_executable_nodep source_file)
    add_executable(${source_file} "${source_file}.cpp")
    target_compile_options(${source_file} PUBLIC ${SYCL_CUSTOM_FLAGS})
    target_compile_options(${source_file} PUBLIC ${DEFAULT_WARNING_FLAGS})
    target_include_directories(${source_file} PUBLIC ${SBM_SIMULATION_INCLUDE_DIR})
    target_link_options(${source_file} PUBLIC ${SBM_SIMULATION_DEFAULT_FLAGS})

endfunction()

function(add_regression_executable source_file)
    add_executable(${source_file} "${source_file}.cpp")
    target_link_libraries(${source_file} PUBLIC -lpqxx -lpq Static_RNG::Static_RNG Eigen3::Eigen ortools::ortools Regression)
    # if(${ENABLE_TBB})
    #     target_link_libraries(${source_file} PUBLIC TBB::tbb)
    # endif()
    target_include_directories(${source_file} PUBLIC ${SBM_SIMULATION_INCLUDE_DIR})
    if (${ENABLE_CLANG_TIDY})

    set_target_properties(${source_file} PROPERTIES CXX_CLANG_TIDY "${CLANG_TIDY_COMMAND}")
    endif()
    target_link_options(${source_file} PUBLIC ${SBM_SIMULATION_DEFAULT_FLAGS})


endfunction()
