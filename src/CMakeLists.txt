function(add_sycl_library source_file)
    add_library(${source_file} STATIC "${source_file}.cpp")
    target_link_libraries(${source_file} PUBLIC Sycl_Graph Static_RNG::Static_RNG TBB::tbb cppitertools)
    target_compile_options(${source_file} PUBLIC ${SYCL_COMPILE_OPTIONS})
    target_compile_options(${source_file} PUBLIC ${DEFAULT_WARNING_FLAGS})
    target_compile_options(${source_file} PRIVATE ${DPCPP_FLAGS} -sycl-std=2020 -std=c++20 -fsycl-unnamed-lambda)
    target_include_directories(${source_file} PUBLIC ${SYCL_GRAPH_INCLUDE_DIR})
    if(${SYCL_GRAPH_USE_CUDA})
        target_compile_options(${source_file} PRIVATE ${SYCL_CUDA_FLAGS})
        target_link_options(${source_file} PRIVATE ${SYCL_CUDA_FLAGS})
    endif()
    target_link_options(${source_file} PRIVATE ${DPCPP_FLAGS} -sycl-std=2020 -std=c++20 -fsycl-unnamed-lambda)
endfunction()

add_sycl_library(SBM_types)
add_sycl_library(SBM_Generation)
target_link_libraries(SBM_Generation PUBLIC SBM_types)

add_sycl_library(SIR_Dynamics)
add_sycl_library(SIR_Infection_Sampling)
add_library(Sycl_Graph INTERFACE)
target_link_libraries(Sycl_Graph INTERFACE SIR_Dynamics SIR_Infection_Sampling SBM_Generation)
